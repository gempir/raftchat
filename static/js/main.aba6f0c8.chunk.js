(this.webpackJsonpraftchat=this.webpackJsonpraftchat||[]).push([[0],{386:function(e,t,n){e.exports=n(736)},391:function(e,t,n){},407:function(e,t){},409:function(e,t){},427:function(e,t){},429:function(e,t){},435:function(e,t){},436:function(e,t){},438:function(e,t){},489:function(e,t){},490:function(e,t){},537:function(e,t){},539:function(e,t){},736:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),a=n(19),o=n.n(a),l=(n(391),n(34)),i=(n(392),n(1)),u=(n(393),n(201)),s=(n(394),n(41)),f=n(35),d=n(127),m=n(71),b=n(31),h=n(372),v=n(27),g=n(37);function p(e,t){var n=Object(r.useState)((function(){try{var n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(r){return console.log(r),l(t),t}})),c=Object(b.a)(n,2),a=c[0],o=c[1],l=function(t){try{var n=t instanceof Function?t(a):t;o(n),window.localStorage.setItem(e,JSON.stringify(n))}catch(r){console.log(r)}};return[a,l]}var j={state:{chatClient:new(n(373).ChatClient)({connection:{type:"websocket",secure:!0}}),channels:{},settings:null,queryCache:new s.a},setState:function(e){},setSettings:function(e,t){},setChannels:function(e){}},O=Object(r.createContext)(j),E=O.Provider,y=function(e){var t=e.children,n=p("settings",j.state.settings),a=Object(b.a)(n,2),o=a[0],l=a[1],i=p("channels",j.state.channels),u=Object(b.a)(i,2),s=u[0],f=u[1],d=Object(r.useState)(Object(m.a)({},j.state,{settings:o,channels:s})),h=Object(b.a)(d,2),O=h[0],y=h[1];return c.a.createElement(E,{value:{state:O,setState:y,setSettings:function(e,t){var n,r,c=Object(m.a)({},t),a=(n=e,Array.from(new Set(function e(t,n){if(null===t)return[];if("string"===typeof t)return[].concat(Object(v.a)(n),[t]);if("object"===typeof t){var r=Object(v.a)(n);return"string"===typeof t.first&&r.push(t.first),"object"===typeof t.first&&r.push.apply(r,Object(v.a)(e(t.first,r))),"string"===typeof t.second&&r.push(t.second),"object"===typeof t.second&&r.push.apply(r,Object(v.a)(e(t.second,r))),[].concat(Object(v.a)(n),Object(v.a)(r))}return[]}(n,[])))),o=Object.keys(t).filter((function(e){return!a.includes(e)})),i=Object(g.a)(o);try{for(i.s();!(r=i.n()).done;){delete c[r.value]}}catch(u){i.e(u)}finally{i.f()}l(e),f(c),y(Object(m.a)({},O,{settings:e,channels:c}))},setChannels:f}},t)};function w(){return Object(r.useContext)(O).state}var x={staleTime:3e5};function k(e){return[].concat(Object(v.a)(function(e){var t=Object(s.c)("bttv:channel:".concat(e),(function(){return""===e?Promise.resolve({sharedEmotes:[],channelEmotes:[]}):fetch("https://api.betterttv.net/3/cached/users/twitch/".concat(e)).then((function(e){return e.json()}))}),x),n=t.isLoading,r=t.error,c=t.data;if(n)return[];if(r)return console.error(r),[];for(var a=[],o=0,l=[].concat(Object(v.a)(null!==(i=null===c||void 0===c?void 0:c.channelEmotes)&&void 0!==i?i:[]),Object(v.a)(null!==(u=null===c||void 0===c?void 0:c.sharedEmotes)&&void 0!==u?u:[]));o<l.length;o++){var i,u,f=l[o];a.push({id:f.id,code:f.code,urls:{small:"https://cdn.betterttv.net/emote/".concat(f.id,"/1x"),medium:"https://cdn.betterttv.net/emote/".concat(f.id,"/2x"),big:"https://cdn.betterttv.net/emote/".concat(f.id,"/3x")}})}return a}(e)),Object(v.a)(function(e){var t=Object(s.c)("ffz:channel:".concat(e),(function(){return""===e?Promise.resolve({sets:{}}):fetch("https://api.frankerfacez.com/v1/room/id/".concat(e)).then((function(e){return e.json()}))}),x),n=t.isLoading,r=t.error,c=t.data;if(n||!(null===c||void 0===c?void 0:c.sets))return[];if(r)return console.error(r),[];var a,o=[],l=Object(g.a)(Object.values(c.sets));try{for(l.s();!(a=l.n()).done;){var i,u=a.value,f=Object(g.a)(u.emoticons);try{for(f.s();!(i=f.n()).done;){var d=i.value;o.push({id:String(d.id),code:d.name,urls:{small:d.urls[1],medium:d.urls[2],big:d.urls[4]}})}}catch(m){f.e(m)}finally{f.f()}}}catch(m){l.e(m)}finally{l.f()}return o}(e)),Object(v.a)(function(){var e=Object(s.c)("bttv:global",(function(){return fetch("https://api.betterttv.net/3/cached/emotes/global").then((function(e){return e.json()}))}),x),t=e.isLoading,n=e.error,r=e.data;if(t||!r)return[];if(n)return console.error(n),[];var c,a=[],o=Object(g.a)(r);try{for(o.s();!(c=o.n()).done;){var l=c.value;a.push({id:l.id,code:l.code,urls:{small:"https://cdn.betterttv.net/emote/".concat(l.id,"/1x"),medium:"https://cdn.betterttv.net/emote/".concat(l.id,"/2x"),big:"https://cdn.betterttv.net/emote/".concat(l.id,"/3x")}})}}catch(i){o.e(i)}finally{o.f()}return a}()),Object(v.a)(function(){var e=Object(s.c)("ffz:global",(function(){return fetch("https://api.frankerfacez.com/v1/set/global").then((function(e){return e.json()}))}),x),t=e.isLoading,n=e.error,r=e.data;if(t||!(null===r||void 0===r?void 0:r.sets))return[];if(n)return console.error(n),[];var c,a=[],o=Object(g.a)(Object.values(r.sets));try{for(o.s();!(c=o.n()).done;){var l,i=c.value,u=Object(g.a)(i.emoticons);try{for(u.s();!(l=u.n()).done;){var f=l.value;a.push({id:String(f.id),code:f.name,urls:{small:f.urls[1],medium:f.urls[2],big:f.urls[4]}})}}catch(d){u.e(d)}finally{u.f()}}}catch(d){o.e(d)}finally{o.f()}return a}()))}var S=n(374),F=n.n(S);function C(){var e=Object(l.a)(["\n\tdisplay: inline-block;\n\tmargin-right: 3px;\n\tfont-weight: bold;\n"]);return C=function(){return e},e}var L=f.a.div.attrs((function(e){return{style:{color:e.color}}}))(C());function z(e){var t=e.displayName,n=e.color,r=""!==n?n:"grey";return c.a.createElement(L,{color:r},t,":")}function R(){var e=Object(l.a)(["\n\tmargin: 0 3px;\n"]);return R=function(){return e},e}function I(){var e=Object(l.a)(["\n\tmargin: 0 0;\n\tmin-height: 1.5rem;\n\tpadding: 0 5px;\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\talign-items: center;\n"]);return I=function(){return e},e}var q=f.a.div(I()),N=f.a.img(R()),M=c.a.memo((function(e){for(var t,n=e.message,r=e.thirdPartyEmotes,a=[],o="",l=0;l<=n.messageText.length;l++){var i=n.messageText[l];t=!1;var u,s=Object(g.a)(n.emotes);try{for(s.s();!(u=s.n()).done;){var f=u.value;if(f.startIndex===l){t=!0,a.push(c.a.createElement(N,{key:l,alt:f.code,src:"https://static-cdn.jtvnw.net/emoticons/v1/".concat(f.id,"/1.0")})),l+=f.endIndex-f.startIndex-1;break}}}catch(v){s.e(v)}finally{s.f()}if(!t){if(" "!==i&&l!==n.messageText.length){o+=i;continue}var d,m=!1,b=Object(g.a)(r);try{for(b.s();!(d=b.n()).done;){var h=d.value;if(o.trim()===h.code){a.push(c.a.createElement(N,{key:l,alt:h.code,src:h.urls.small})),m=!0,o="";break}}}catch(v){b.e(v)}finally{b.f()}m||(a.push(c.a.createElement(F.a,{key:l,componentDecorator:function(e,t,n){return c.a.createElement("a",{target:"__blank",href:e,key:n},t)}},o)),o=""),a.push(i)}}return c.a.createElement(q,null,c.a.createElement(z,{displayName:n.displayName,color:n.colorRaw})," ",a)}),(function(){return!0}));function T(){var e=Object(l.a)(["\n    list-style-type: none;\n    flex-grow: 1;\n\toverflow-y: scroll;\n\toverflow-x: hidden;\n\tdisplay: flex;\n\tflex-direction: column-reverse;\n\n\tli {\n\t\tpadding: 0 5px;\n\t}\n\n\tli:first-child {\n\t\tpadding-bottom: 5px\n\t}\n\n\t&::-webkit-scrollbar {\n\t\twidth: 0px;\n\t}\n\t\n\t&::-webkit-scrollbar-track {\n\t\tbackground: transparent;\n\t}\n\n\t&::-webkit-scrollbar-thumb {\n\t\tbackground-color: transparent;\n\t}\n"]);return T=function(){return e},e}function D(){var e=Object(l.a)(["\n\tposition: absolute;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\tpadding: 5px;\n\ttext-align: center;\n\tcursor: pointer;\n\tuser-select: none;\n\twidth: 100%;\n\tbackground: rgba(0, 0, 0, 0.75);\n\n\t&:hover {\n\t\tbackground: rgba(50, 50, 50, 0.75);\n\t}\n"]);return D=function(){return e},e}function J(){var e=Object(l.a)(["\n    display: flex;\n\talign-items: center;\n    justify-content: center;\n\theight: 100%;\n"]);return J=function(){return e},e}function P(){var e=Object(l.a)(["\n\tposition: relative;\n\tflex-grow: 1;\n    display: flex;\n    flex-direction: column;\n\theight: 100%;\n"]);return P=function(){return e},e}var B=f.a.div(P()),A=f.a.div(J()),V=f.a.div(D()),G=f.a.ul(T());function K(e){return e.channel?c.a.createElement(_,{channel:e.channel}):c.a.createElement(H,{id:e.id})}function _(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500,n=w(),c=n.chatClient,a=Object(r.useState)([]),o=Object(b.a)(a,2),l=o[0],i=o[1],u=Object(r.useCallback)((function(n){if(n.channelName===e){var r=Object(v.a)(l);r.length+1===t&&r.pop(),r.unshift(n),i(r)}}),[t,e,l]);return Object(r.useEffect)((function(){return""===e?function(){}:(c.join(e),c.on("PRIVMSG",u),function(){return c.removeListener("PRIVMSG",u)})}),[e,c,t,u]),l}(e.channel),n=Object(r.useRef)(null),a=Object(r.useState)(!1),o=Object(b.a)(a,2),l=o[0],i=o[1],u=k(t.length>0?t[0].channelID:"");return c.a.createElement(B,null,c.a.createElement(G,{onScroll:function(e){e.target.scrollTop<0?i(!0):i(!1)},ref:n},t.map((function(e){return c.a.createElement("li",{key:e.messageID},c.a.createElement(M,{message:e,thirdPartyEmotes:u}))}))),l&&c.a.createElement(V,{onClick:function(){null!==n.current&&(n.current.scrollTop=0)}},"Scroll To Bottom"))}function H(e){var t=e.id,n=Object(r.useContext)(O),a=n.state,o=n.setState,l=Object(r.useState)(""),i=Object(b.a)(l,2),u=i[0],s=i[1],f=c.a.createElement(h.zb,{content:"Join"},c.a.createElement(h.g,{icon:"chat",type:"submit",minimal:!0}));return c.a.createElement(A,null,c.a.createElement("form",{onSubmit:function(e){if(e.preventDefault(),e.target instanceof HTMLFormElement){var n=Object(m.a)({},a,{channels:Object(m.a)({},a.channels,Object(d.a)({},t,u.toLowerCase()))});null===a.settings&&(n.settings=t),o(n)}}},c.a.createElement(h.M,{placeholder:"channel",name:"channel",value:u,onChange:function(e){return s(e.target.value)},large:!0,rightElement:f,type:"text"})))}function W(e){return e&&e?Boolean(document.fullscreenElement===e||document.mozFullScreenElement===e||document.webkitFullscreenElement===e||document.msFullscreenElement===e):Boolean(document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement)}function Q(){var e=Object(l.a)(["\n    display: flex;\n\talign-items: center;\n\tpadding: 5px;\n    width: 100%;\n    height: 2rem;\n\tjustify-content: space-between;\n\n\t.bp3-button {\n\t\tmin-height: 0;\n\t\tmin-width: 0;\n\t\tbackground: transparent !important;\n\t}\n"]);return Q=function(){return e},e}var U=f.a.div(Q());function X(){var e=function(e){var t=W(e),n=Object(r.useState)(t),c=Object(b.a)(n,2),a=c[0],o=c[1];return Object(r.useEffect)((function(){function t(){o(W(e))}return document.addEventListener("webkitfullscreenchange",t,!1),document.addEventListener("mozfullscreenchange",t,!1),document.addEventListener("msfullscreenchange",t,!1),document.addEventListener("MSFullscreenChange",t,!1),document.addEventListener("fullscreenchange",t,!1),function(){document.removeEventListener("webkitfullscreenchange",t),document.removeEventListener("mozfullscreenchange",t),document.removeEventListener("msfullscreenchange",t),document.removeEventListener("MSFullscreenChange",t),document.removeEventListener("fullscreenchange",t)}}),[e]),[a,a?function(){return document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen?document.msExitFullscreen():void 0}:function(){var t=e&&e||document.documentElement;return t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():void 0}]}(document.body),t=Object(b.a)(e,2)[1];return c.a.createElement(U,null,"Settings",c.a.createElement(h.g,{icon:"fullscreen",onClick:t}))}function Y(){return Math.random().toString(36).substr(2,9).toString()}var Z="#121416",$="#1C1F22",ee="#25292D",te="#090A0B";function ne(){var e=Object(l.a)(["\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n\n\t.mosaic.mosaic-blueprint-theme.bp3-dark {\n\t\tbackground: ",";\n\n\t\t.mosaic-window-body {\n\t\t\tbackground: ",";\n\t\t}\n\n\t\t.mosaic-window-toolbar {\n\t\t\tbackground: ",";\n\t\t}\n\n\t\t.mosaic-window-toolbar.draggable:hover {\n\t\t\tbackground: ",";\n\t\t}\n\t}\n"]);return ne=function(){return e},e}var re=f.a.div(ne(),te,Z,$,ee);function ce(){var e=Object(r.useContext)(O),t=e.state,n=e.setSettings;return Object(r.useEffect)((function(){t.chatClient.connect()}),[t.chatClient]),Object(r.useEffect)((function(){window.localStorage.setItem("channels",JSON.stringify(t.channels))}),[t.channels]),Object(r.useEffect)((function(){window.localStorage.setItem("settings",JSON.stringify(t.settings))}),[t.settings]),c.a.createElement(s.b,{queryCache:t.queryCache},c.a.createElement(re,{className:"mosaic-blueprint-theme ".concat(i.g.DARK)},c.a.createElement(X,null),c.a.createElement(u.Mosaic,{className:"mosaic-blueprint-theme ".concat(i.g.DARK),renderTile:function(e,n){var r,a;return c.a.createElement(u.MosaicWindow,{path:n,createNode:Y,title:null!==(r=t.channels[e])&&void 0!==r?r:""},c.a.createElement(K,{channel:null!==(a=t.channels[e])&&void 0!==a?a:"",id:e}))},onRelease:function(e){return n(e,t.channels)},initialValue:t.settings,zeroStateView:c.a.createElement(K,{id:Y()})})))}o.a.render(c.a.createElement(y,null,c.a.createElement(ce,null)),document.getElementById("root"))}},[[386,1,2]]]);
//# sourceMappingURL=main.aba6f0c8.chunk.js.map